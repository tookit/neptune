(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02a20e61"],{"0fea":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return o});var r=n("b775"),i={user:"/user",role:"/role",service:"/service",permission:"/permission",permissionNoPager:"/permission/no-pager"};function a(e){return Object(r["b"])({url:i.role,method:"get",params:e})}function s(e){return Object(r["b"])({url:i.service,method:"get",params:e})}function o(e){return Object(r["b"])({url:i.permissionNoPager,method:"get",params:e})}},5235:function(e,t,n){"use strict";var r=n("6eb1"),i=n.n(r);i.a},"6eb1":function(e,t,n){},"88bc":function(e,t,n){(function(t){var n=1/0,r=9007199254740991,i="[object Arguments]",a="[object Function]",s="[object GeneratorFunction]",o="[object Symbol]",c="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,u=c||l||Function("return this")();function d(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function m(e,t){var n=-1,r=e?e.length:0,i=Array(r);while(++n<r)i[n]=t(e[n],n,e);return i}function f(e,t){var n=-1,r=t.length,i=e.length;while(++n<r)e[i+n]=t[n];return e}var h=Object.prototype,p=h.hasOwnProperty,b=h.toString,v=u.Symbol,g=h.propertyIsEnumerable,y=v?v.isConcatSpreadable:void 0,k=Math.max;function j(e,t,n,r,i){var a=-1,s=e.length;n||(n=x),i||(i=[]);while(++a<s){var o=e[a];t>0&&n(o)?t>1?j(o,t-1,n,r,i):f(i,o):r||(i[i.length]=o)}return i}function O(e,t){return e=Object(e),w(e,t,function(t,n){return n in e})}function w(e,t,n){var r=-1,i=t.length,a={};while(++r<i){var s=t[r],o=e[s];n(o,s)&&(a[s]=o)}return a}function _(e,t){return t=k(void 0===t?e.length-1:t,0),function(){var n=arguments,r=-1,i=k(n.length-t,0),a=Array(i);while(++r<i)a[r]=n[t+r];r=-1;var s=Array(t+1);while(++r<t)s[r]=n[r];return s[t]=a,d(e,this,s)}}function x(e){return S(e)||P(e)||!!(y&&e&&e[y])}function A(e){if("string"==typeof e||I(e))return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}function P(e){return q(e)&&p.call(e,"callee")&&(!g.call(e,"callee")||b.call(e)==i)}var S=Array.isArray;function C(e){return null!=e&&E(e.length)&&!N(e)}function q(e){return $(e)&&C(e)}function N(e){var t=F(e)?b.call(e):"";return t==a||t==s}function E(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function F(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function $(e){return!!e&&"object"==typeof e}function I(e){return"symbol"==typeof e||$(e)&&b.call(e)==o}var J=_(function(e,t){return null==e?{}:O(e,m(j(t,1),A))});e.exports=J}).call(this,n("c8ba"))},"98bb":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{style:{height:"100%"},attrs:{bordered:!1}},[n("a-row",{attrs:{gutter:24}},[n("a-col",{attrs:{md:4}},[n("a-list",{attrs:{itemLayout:"vertical",dataSource:e.roles},scopedSlots:e._u([{key:"renderItem",fn:function(t,r){return n("a-list-item",{key:r},[n("a-list-item-meta",{style:{marginBottom:"0"}},[n("span",{staticStyle:{"text-align":"center",display:"block"},attrs:{slot:"description"},slot:"description"},[e._v(e._s(t.describe))]),n("a",{staticStyle:{"text-align":"center",display:"block"},attrs:{slot:"title"},on:{click:function(n){e.edit(t)}},slot:"title"},[e._v(e._s(t.name))])])],1)}}])})],1),n("a-col",{attrs:{md:20}},[n("div",{staticStyle:{"max-width":"800px"}},[e.isMobile()?n("a-divider"):e._e(),e.mdl.id?n("div",[n("h3",[e._v("角色："+e._s(e.mdl.name))])]):e._e(),n("a-form",{attrs:{form:e.form,layout:e.isMobile()?"vertical":"horizontal"}},[n("a-form-item",{attrs:{label:"唯一键"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[{required:!0,message:"Please input unique key!"}]}],expression:"[ 'id', {rules: [{ required: true, message: 'Please input unique key!' }]} ]"}],attrs:{placeholder:"请填写唯一键"}})],1),n("a-form-item",{attrs:{label:"角色名称"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"Please input role name!"}]}],expression:"[ 'name', {rules: [{ required: true, message: 'Please input role name!' }]} ]"}],attrs:{placeholder:"请填写角色名称"}})],1),n("a-form-item",{attrs:{label:"状态"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{rules:[]}],expression:"[ 'status', {rules: []} ]"}]},[n("a-select-option",{attrs:{value:1}},[e._v("正常")]),n("a-select-option",{attrs:{value:2}},[e._v("禁用")])],1)],1),n("a-form-item",{attrs:{label:"备注说明"}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe",{rules:[{required:!0,message:"Please input role name!"}]}],expression:"[ 'describe', {rules: [{ required: true, message: 'Please input role name!' }]} ]"}],attrs:{row:3,placeholder:"请填写角色名称"}})],1),n("a-form-item",{attrs:{label:"拥有权限"}},e._l(e.permissions,function(t,r){return n("a-row",{key:r,attrs:{gutter:16}},[n("a-col",{attrs:{xl:4,lg:24}},[e._v("\n                "+e._s(t.name)+"：\n              ")]),n("a-col",{attrs:{xl:20,lg:24}},[t.actionsOptions.length>0?n("a-checkbox",{attrs:{indeterminate:t.indeterminate,checked:t.checkedAll},on:{change:function(n){e.onChangeCheckAll(n,t)}}},[e._v("\n                  全选\n                ")]):e._e(),n("a-checkbox-group",{attrs:{options:t.actionsOptions},on:{change:function(n){e.onChangeCheck(t)}},model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"permission.selected"}})],1)],1)}))],1)],1)])],1)],1)},i=[],a=(n("ac6a"),n("f751"),n("0fea")),s=n("ac0d"),o=n("bade"),c=n("88bc"),l=n.n(c),u={name:"RoleList",mixins:[s["b"]],components:{},data:function(){return{form:this.$form.createForm(this),mdl:{},roles:[],permissions:[]}},created:function(){var e=this;Object(a["b"])().then(function(t){e.roles=t.result.data,e.roles.push({id:"-1",name:"新增角色",describe:"新增一个角色"}),console.log("this.roles",e.roles)}),this.loadPermissions()},methods:{callback:function(e){console.log(e)},add:function(){this.edit({id:0})},edit:function(e){var t=this;if(this.mdl=Object.assign({},e),this.mdl.permissions&&this.permissions){var n={};this.mdl.permissions.forEach(function(e){n[e.permissionId]=e.actionEntitySet.map(function(e){return e.action})}),console.log("permissionsAction",n),this.permissions.forEach(function(e){var t=n[e.id];e.selected=t||[]}),console.log("this.permissions",this.permissions)}this.$nextTick(function(){t.form.setFieldsValue(l()(t.mdl,"id","name","status","describe"))}),console.log("this.mdl",this.mdl)},onChangeCheck:function(e){e.indeterminate=!!e.selected.length&&e.selected.length<e.actionsOptions.length,e.checkedAll=e.selected.length===e.actionsOptions.length},onChangeCheckAll:function(e,t){console.log("permission:",t),Object.assign(t,{selected:e.target.checked?t.actionsOptions.map(function(e){return e.value}):[],indeterminate:!1,checkedAll:e.target.checked})},loadPermissions:function(){var e=this;Object(a["a"])().then(function(t){var n=t.result;e.permissions=n.map(function(e){var t=Object(o["a"])(e.actionData);return e.checkedAll=!1,e.selected=[],e.indeterminate=!1,e.actionsOptions=t.map(function(e){return{label:e.describe,value:e.action}}),e})})}}},d=u,m=(n("5235"),n("2877")),f=Object(m["a"])(d,r,i,!1,null,"70e3ec27",null);f.options.__file="RoleList.vue";t["default"]=f.exports},bade:function(e,t,n){"use strict";function r(e){try{return JSON.parse(e)}catch(t){console.log("err",t.message)}return[]}n.d(t,"a",function(){return r})}}]);
//# sourceMappingURL=chunk-02a20e61.59569eeb.js.map